// nextflow.config template for local and slurm profiles

process {
    executor = 'local'
    memory = '4 GB'
    process.cpus = { checkMax(6) }
}

// Helper function to not exceed available CPUs
def checkMax(n) {
    def maxCpus = Runtime.runtime.availableProcessors()
    return n > maxCpus ? maxCpus : n
}

profiles {
    standard {
        process.executor = 'local'
        process.cpus = { checkMax(4) }
    }
    slurm {
        process.executor = 'slurm'
        process.cpus = 4
        process.memory = '8 GB'
        process.time = '4h'
    }
}
